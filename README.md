# SkillRadar üéØ

**SkillRadar** ‚Äî —ç—Ç–æ ETL-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞ —Ç—Ä—É–¥–∞. –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ —Å HH.ru, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Kafka –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ ClickHouse. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏ –∏ —É—Ä–æ–≤–Ω–µ–º –∑–∞—Ä–ø–ª–∞—Ç.

## üèó –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Big Data —Å—Ç–µ–∫. –í –≤–µ—Ä—Å–∏–∏ 2.0 –º—ã –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ **PostgreSQL** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –≤–∫–ª—é—á–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á.

* **Airflow 2.7 + Postgres**. –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `LocalExecutor` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á.
* **Kafka + Zookeeper**. –ë—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É "—Å—ã—Ä—ã—Ö" –≤–∞–∫–∞–Ω—Å–∏–π –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
* **ClickHouse**. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Å—á–∏—Ç–∞–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ –º–∏–ª–ª–∏–æ–Ω–∞–º —Å—Ç—Ä–æ–∫.
* **Metabase**. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è. –°—Ç—Ä–æ–∏—Ç –¥–∞—à–±–æ—Ä–¥—ã –ø–æ–≤–µ—Ä—Ö ClickHouse.
* **Docker**. –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–∫–∞—á–∞–π—Ç–µ –∫–æ–¥
```bash
git clone [https://github.com/–í–ê–®_–ù–ò–ö/skill_radar.git](https://github.com/–í–ê–®_–ù–ò–ö/skill_radar.git)
cd skill_radar
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
Bash

docker-compose up -d
–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–π–º–µ—Ç 2-3 –º–∏–Ω—É—Ç—ã (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö).

3. –í–∫–ª—é—á–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Airflow: http://localhost:8081 (–õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å: admin / admin).

–í–∫–ª—é—á–∏—Ç–µ DAG skillradar_hh_parser (—Ç—É–º–±–ª–µ—Ä ON).

–ù–∞–∂–º–∏—Ç–µ Play (‚ñ∂Ô∏è).

4. –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
Metabase (–î–∞—à–±–æ—Ä–¥—ã): http://localhost:3000

ClickHouse (SQL): –ü–æ—Ä—Ç 8123 (HTTP) / 9000 (Native).

üìä –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (SQL)
–î–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ skill_radar.vacancies_categorized.

–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤–∞–∫–∞–Ω—Å–∏–π:

SQL

SELECT 
    category, 
    count() as cnt, 
    round(avg(salary_rub_from), 0) as avg_salary
FROM skill_radar.vacancies_categorized 
GROUP BY category 
ORDER BY cnt DESC;
–ö—Ç–æ —Å–µ–π—á–∞—Å –Ω–∞–Ω–∏–º–∞–µ—Ç (–¢–æ–ø-10):

SQL

SELECT employer_name, count() as cnt 
FROM skill_radar.vacancies_categorized 
GROUP BY employer_name 
ORDER BY cnt DESC 
LIMIT 10;
üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ):

Bash

docker-compose down
–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (—É–¥–∞–ª–∏—Ç—å –±–∞–∑—É –∏ –Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è):

Bash

docker-compose down -v